(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7988edea"],{1348:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"auth_register"},[e.isQz?t("div",{staticClass:"qz_container"},[t("div",{staticClass:"qz_auth_login",style:{backgroundImage:"url("+e.loginBg+")"}},[t("el-form",{ref:"form",attrs:{model:e.formData,"status-icon":"",rules:e.formRules,"label-position":"top"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{disabled:!!e.localPhone,clearable:"",placeholder:"请输入账号，长度不能小于6位"},model:{value:e.formData.username,callback:function(r){e.$set(e.formData,"username",r)},expression:"formData.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",clearable:"",autocomplete:"off",placeholder:"请输入密码，长度不能小于6位"},model:{value:e.formData.password,callback:function(r){e.$set(e.formData,"password",r)},expression:"formData.password"}})],1),t("el-form-item",{staticClass:"submit_item"},[t("el-button",{staticClass:"login_btn",attrs:{type:"primary",loading:e.loading},on:{click:e.submitFormQz}},[e._v("账号注册/登录")])],1)],1)],1)]):t("div",[t("div",{staticClass:"title"},[e._v("快速注册")]),58150!=e.user.domain.agent_id?t("el-form",{ref:"form",attrs:{model:e.formData,"status-icon":"",rules:e.formRules,"label-position":"top"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{disabled:!!e.localPhone,clearable:"",placeholder:"请输入账号，长度不能小于6位"},model:{value:e.formData.username,callback:function(r){e.$set(e.formData,"username",r)},expression:"formData.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",clearable:"",autocomplete:"off",placeholder:"请输入密码，长度不能小于6位"},model:{value:e.formData.password,callback:function(r){e.$set(e.formData,"password",r)},expression:"formData.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"rePassword"}},[t("el-input",{attrs:{type:"password",clearable:"",autocomplete:"off",placeholder:"请再次输入密码，长度不能小于6位"},model:{value:e.formData.rePassword,callback:function(r){e.$set(e.formData,"rePassword",r)},expression:"formData.rePassword"}})],1),e.app.domain.invite_code||e.localCode||e.localSign?e._e():t("el-form-item",{attrs:{label:"邀请码",prop:"code"}},[t("el-input",{attrs:{type:"text",clearable:"",autocomplete:"off",placeholder:"请输入邀请码"},model:{value:e.formData.code,callback:function(r){e.$set(e.formData,"code",r)},expression:"formData.code"}})],1),t("el-form-item",{staticClass:"submit_item"},[t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("注册")])],1),t("div",{staticClass:"tips"},[t("span",{on:{click:function(r){return e.pushPath("/auth/login")}}},[e._v("登录账号")])])],1):t("div",{staticStyle:{padding:"28px"}},[e._v("\n            请联系代理获取邀请码注册正式会员\n        ")])],1)])},o=[],s=(t("7f7f"),t("5880"),t("b775"),t("7b0a")),n=t("ed08"),i={name:"User-Register",data:function(){var e=this,r=function(r,t,a){""==t?a(new Error("不能为空")):t!=e.formData.password?a(new Error("密码不一致")):a()};return{dialogVisible:!1,formData:{username:"",password:"",rePassword:"",code:""},formRules:{username:{require:!0,validator:s["j"],trigger:"blur"},password:s["g"],rePassword:{require:!0,validator:r,trigger:"blur"},code:s["c"]},loading:!1,loginBg:Object(n["d"])("/images/2019/09/29/edaf827d-2b47-4c9d-a571-526ba36c23b4.jpg")}},computed:{app:function(){return this.$store.getters.app},user:function(){return this.$store.getters.user},localCode:function(){return window.localStorage.getItem("code")},localSign:function(){return window.localStorage.getItem("sign")},localPhone:function(){return window.localStorage.getItem("phone")},queryPhone:function(){return this.$route.query.phone},isQz:function(){return"qz-auth-register"==this.$route.name}},mounted:function(){this.init()},methods:{init:function(){this.isQz&&this.queryPhone?(this.formData.username=this.queryPhone,window.localStorage.setItem("phone",this.queryPhone)):this.localPhone&&(this.formData.username=this.localPhone),this.$route.query.sign&&window.localStorage.setItem("sign",this.$route.query.sign)},submitForm:function(){var e=this;this.formData.username=this.formData.username.trim();var r=Object.assign({},this.formData);this.app.domain.invite_code&&(r.code=this.app.domain.invite_code),this.localCode&&(r.code=this.localCode),this.localSign&&(r.code=this.localSign,r.sign=this.localSign),this.$refs.form.validate((function(t){if(!t)return console.log("提交错误"),!1;var a={username:r.username,password:r.password,code:r.code};r.sign&&(a.sign=r.sign),!a.phone||Object(n["j"])(a.phone)?r.rePassword==r.password?e.$store.dispatch("userRegister",a).then((function(r){200==r.code&&(e.localPhone&&window.localStorage.removeItem("phone"),e.app.isApp&&e.$message({message:"注册成功",type:"success",duration:1e3,onClose:function(){e.$store.dispatch("postMsgToApp",{action:"register",data:{token:r.token}})}}))})):e.$message.error("两次密码不一致"):e.$message.error("手机号格式错误")}))},submitFormQz:function(){var e=this;this.formData.username=this.formData.username.trim(),this.$refs.form.validate((function(r){if(!r)return console.log("提交错误"),!1;if(!e.loading){var t={username:e.formData.username,password:e.formData.password,sign:e.localSign};t.sign?(t.code=t.sign,!t.phone||Object(n["j"])(t.phone)?(t._stopReload=!0,e.loading=!0,e.$store.dispatch("loginAndRegisterByUsername",t).then((function(r){if(e.loading=!1,200==r.code){e.localPhone&&window.localStorage.removeItem("phone");var t=e.$router.resolve("/nav/3");window.location=t.href}}))):e.$message.error("手机号格式错误")):e.$message.error("缺少Token")}}))},pushPath:function(e){this.$router.push({path:e})}}},l=i,u=(t("3c35"),t("2877")),c=Object(u["a"])(l,a,o,!1,null,null,null);r["default"]=c.exports},"3c35":function(e,r,t){"use strict";var a=t("7531"),o=t.n(a);o.a},7531:function(e,r,t){},"7b0a":function(e,r,t){"use strict";function a(e,r,t){/.*[\u4e00-\u9fa5]+.*/.test(r)?t(new Error("不能包含中文")):t()}t.d(r,"g",(function(){return o})),t.d(r,"c",(function(){return s})),t.d(r,"d",(function(){return n})),t.d(r,"i",(function(){return i})),t.d(r,"f",(function(){return l})),t.d(r,"h",(function(){return u})),t.d(r,"e",(function(){return c})),t.d(r,"j",(function(){return d})),t.d(r,"a",(function(){return m})),t.d(r,"b",(function(){return g}));var o=[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,message:"密码最少6位",trigger:"blur"},{validator:a,trigger:"blur"}],s=[{required:!0,message:"邀请码不能为空",trigger:"blur"}],n=[{required:!0,message:"提款码不能为空",trigger:"blur"},{validator:function(e,r,t){""===r?t(new Error("请输入提款码")):/^\d+$/.test(r)?(6!=r.length&&t(new Error("提款码为6位数字")),t()):t(new Error("提款码6位数字"))},trigger:"blur"}],i=[{required:!0,message:"手机号不能为空",trigger:"blur"},{validator:function(e,r,t){/^1[3456789]\d{9}$/.test(r)?t():t(new Error("手机号格式错误"))},trigger:"blur"}],l=[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}],u=[{required:!0,message:"验证码不能为空",trigger:"blur"},{type:"number",message:"验证码数字",trigger:"blur"},{validator:a,trigger:"blur"}],c=[{required:!0,message:"验证码不能为空",trigger:"blur"},{type:"number",message:"验证码数字",trigger:"blur"}];function d(e,r,t){/^[a-zA-Z0-9]{6,20}$/.test(r)?t():t(new Error("用户名长度必须6-20位，允许字符：字母、数字"))}var m=[{required:!0,message:"银行卡号不能为空",trigger:"blur"},{validator:function(e,r,t){/^[0-9]{14,20}$/.test(r)?t():t(new Error("银行卡号格式有误"))},trigger:"blur"}],g=[{required:!0,message:"姓名不能为空",trigger:"blur"},{validator:function(e,r,t){/^[\u4E00-\u9FA5]+$/.test(r)?r.length<2?t(new Error("姓名长度错误")):t():t(new Error("姓名必须是中文名"))},trigger:"blur"}]}}]);
//# sourceMappingURL=chunk-7988edea.b3983d4c.js.map