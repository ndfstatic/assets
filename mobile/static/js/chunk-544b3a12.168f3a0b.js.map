{"version":3,"sources":["webpack:///./src/utils/validator.js","webpack:///./src/views/user/Login.vue?9ee7","webpack:///src/views/user/Login.vue","webpack:///./src/views/user/Login.vue?acc0","webpack:///./src/views/user/Login.vue?7d39","webpack:///./src/views/user/Login.vue?ed16"],"names":["validateHasChina","rule","value","callback","test","Error","passwordValidator","required","message","trigger","min","validator","customCodeValidator","drawPasswordValidator","length","phoneValidator","emailValidator","type","phoneCodeValidator","emailCodeValidator","usernameValidator","bankAccountValidator","bankNameValidator","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","user","domain","agent_id","ref","attrs","formData","formRules","model","$$v","$set","expression","loading","on","submitForm","$event","pushPath","staticStyle","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-544b3a12.168f3a0b.js","sourcesContent":["/**\n * Created by jiachenpan on 16/11/18.\n */\n\nfunction validateHasChina(rule, value, callback) {\n  if (/.*[\\u4e00-\\u9fa5]+.*/.test(value)) {\n    callback(new Error('不能包含中文'));\n  } else {\n    callback();\n  }\n}\n\nexport function isvalidUsername(str) {\n  const valid_map = ['admin', 'editor']\n  return valid_map.indexOf(str.trim()) >= 0\n}\n\n/* 合法uri*/\nexport function validateURL(textval) {\n  const urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\n  return urlregex.test(textval)\n}\n\n/* 小写字母*/\nexport function validateLowerCase(str) {\n  const reg = /^[a-z]+$/\n  return reg.test(str)\n}\n\n/* 大写字母*/\nexport function validateUpperCase(str) {\n  const reg = /^[A-Z]+$/\n  return reg.test(str)\n}\n\n/* 大小写字母*/\nexport function validateAlphabets(str) {\n  const reg = /^[A-Za-z]+$/\n  return reg.test(str)\n}\n\n/**\n * validate email\n * @param email\n * @returns {boolean}\n */\nexport function validateEmail(email) {\n  const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n  return re.test(email)\n}\n\nexport const passwordValidator = [\n  { required: true, message: '密码不能为空', trigger: 'blur'},\n  { min: 6, message: '密码最少6位', trigger: 'blur' },\n  { validator: validateHasChina, trigger: 'blur' },\n]\n\nexport const customCodeValidator = [\n  { required: true, message: '邀请码不能为空', trigger: 'blur'},\n]\n\nexport const drawPasswordValidator = [\n  { required: true, message: '提款码不能为空', trigger: 'blur'},\n  { validator: (rule, value, callback) => {\n    if (value === '') {\n      callback(new Error('请输入提款码'));\n    } else {\n      if (!/^\\d+$/.test(value)) {\n        callback(new Error('提款码6位数字'));\n      }else {\n        if(value.length != 6) {\n          callback(new Error('提款码为6位数字'));\n        }\n        callback();\n      }\n    }\n  }, trigger: 'blur' },\n]\n\nexport const phoneValidator = [\n  { required: true, message: '手机号不能为空', trigger: 'blur'},\n  { validator: (rule, value, callback) => {\n    if (!(/^1[3456789]\\d{9}$/.test(value))) {\n      callback(new Error('手机号格式错误'));\n    } else {\n      callback();\n    }\n  }, trigger: 'blur' },\n]\n\nexport const emailValidator = [\n  { required: true, message: '邮箱不能为空', trigger: 'blur'},\n  { type: 'email', message: '邮箱格式错误', trigger: 'blur' }\n]\n\nexport const phoneCodeValidator = [\n  { required: true, message: '验证码不能为空', trigger: 'blur'},\n  { type: 'number', message: '验证码数字', trigger: 'blur' },\n  { validator: validateHasChina, trigger: 'blur' },\n]\n\nexport const emailCodeValidator = [\n  { required: true, message: '验证码不能为空', trigger: 'blur'},\n  { type: 'number', message: '验证码数字', trigger: 'blur' }\n]\n\nexport function usernameValidator(rule, value, callback) {\n  if(!/^[a-zA-Z0-9]{6,20}$/.test(value)) {\n    callback(new Error('用户名长度必须6-20位，允许字符：字母、数字'));\n  } else {\n    callback();\n  }\n};\n\nexport const bankAccountValidator = [\n  { required: true, message: '银行卡号不能为空', trigger: 'blur'},\n  { validator: (rule, value, callback) => {\n    if(!/^[0-9]{14,20}$/.test(value)) {\n      callback(new Error('银行卡号格式有误'));\n    } else {\n      callback();\n    }\n  }, trigger: 'blur' },\n]\n\nexport const bankNameValidator = [\n  { required: true, message: '姓名不能为空', trigger: 'blur'},\n  { validator: (rule, value, callback) => {\n    if(!/^[\\u4E00-\\u9FA5]+$/.test(value)) {\n      callback(new Error('姓名必须是中文名'));\n    }else if(value.length < 2) {\n      callback(new Error('姓名长度错误'));\n    } else {\n      callback();\n    }\n  }, trigger: 'blur' },\n]","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"auth_login\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"用户登录\")]),(_vm.user.domain.agent_id != 58150)?_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.formData,\"status-icon\":\"\",\"rules\":_vm.formRules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入账号，长度不能小于6位\"},model:{value:(_vm.formData.username),callback:function ($$v) {_vm.$set(_vm.formData, \"username\", $$v)},expression:\"formData.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"clearable\":\"\",\"autocomplete\":\"off\",\"placeholder\":\"请输入密码，长度不能小于6位\"},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", $$v)},expression:\"formData.password\"}})],1),_c('el-form-item',{staticClass:\"submit_item\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.submitForm}},[_vm._v(\"登录\")])],1),_c('div',{staticClass:\"tips\"},[_c('span',{on:{\"click\":function($event){return _vm.pushPath('/auth/register')}}},[_vm._v(\"注册账号\")]),_c('span',{staticStyle:{\"float\":\"right\"},on:{\"click\":function($event){return _vm.pushPath('/help')}}},[_vm._v(\"忘记密码？\")])])],1):_c('div',{staticStyle:{\"padding\":\"28px\"}},[_vm._v(\"\\n        请联系代理获取邀请码注册正式会员\\n    \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"auth_login\">\n       <div class=\"title\">用户登录</div>\n       <el-form :model=\"formData\" status-icon :rules=\"formRules\" ref=\"form\" label-position=\"top\" v-if=\"user.domain.agent_id != 58150\">\n            <el-form-item label=\"用户名\" prop=\"username\">\n                <el-input v-model=\"formData.username\" clearable placeholder=\"请输入账号，长度不能小于6位\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码\" prop=\"password\">\n                <el-input type=\"password\" clearable v-model=\"formData.password\" autocomplete=\"off\" placeholder=\"请输入密码，长度不能小于6位\"></el-input>\n            </el-form-item>\n            <el-form-item class=\"submit_item\">\n                <el-button type=\"primary\" @click=\"submitForm\" :loading=\"loading\">登录</el-button>\n            </el-form-item>                                \n            <div class=\"tips\">\n                <span @click=\"pushPath('/auth/register')\">注册账号</span>\n                <span @click=\"pushPath('/help')\" style=\"float: right;\">忘记密码？</span>\n            </div>\n        </el-form>\n        <div v-else style=\"padding: 28px;\">\n            请联系代理获取邀请码注册正式会员\n        </div>\n    </div>\n\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { \n    passwordValidator,\n    usernameValidator\n} from '@/utils/validator'\n\n\nexport default {\n    name: 'User-Login',\n\n    data() {\n        \n        return {\n            formData: {\n                username: process.env.NODE_ENV == 'development' ? 'ceshi002' : '',\n                password: process.env.NODE_ENV == 'development' ? 'ceshi002' : '',\n            },\n            loading: false,\n            formRules: {\n                username: { require: true, validator: usernameValidator, trigger: 'blur'},\n                password: passwordValidator,\n            }\n        }\n    },\n    computed: {\n\t\tapp() { return this.$store.getters.app },\n\t\tuser() { return this.$store.getters.user },\n        localPhone() {\n          return window.localStorage.getItem('phone');\n        },\n    },\n\n    mounted() {\n        this.init();\n    },\n\n    methods: {\n        init() {\n            \n        },\n\n        submitForm() {\n            this.formData.username = this.formData.username.trim();\n\n            this.$refs.form.validate((valid) => {\n                if (valid) {\n                    if(this.loading) return ;\n\n                    var data = {\n                        username: this.formData.username,\n                        password: this.formData.password,\n                    };\n\n                    // 如果是 app\n                    // if(this.app.isApp) {\n                    //     this.loading = true;\n                    //     this.$store.dispatch('postMsgToApp', {\n                    //         action: 'login',\n                    //         data,\n                    //     })\n\n                    //     setTimeout(() => { this.loading = false }, 1000);\n                    //     return ;\n                    // }\n\n                    this.loading = true;\n                    this.$store.dispatch('loginByUsername', data).then((json) => {\n                        this.loading = false;\n                        if(json.code == 200) {\n                            if(this.localPhone) {\n                                window.localStorage.removeItem('phone');\n                            }\n\n                            if(this.app.isApp) {\n                                this.$message({\n                                    message: '登录成功',\n                                    type: 'success',\n                                    duration: 1000,\n                                    onClose:() => {\n                                        this.$store.dispatch('postMsgToApp', {\n                                            action: 'login',\n                                            data: {\n                                                token: json.token\n                                            },\n                                        })\n                                    }\n                                });\n                            }\n                            // this.$message({\n                            //     message: '登录成功',\n                            //     type: 'success'\n                            // });\n\n                            // this.$router.push({ path: '/' })\n                        }\n                    })\n                } else {\n                    console.log('提交错误');\n                    return false;\n                }\n            });\n        },\n\n\n        pushPath(path) {\n            // if(this.app.isApp) {\n            //     this.$store.dispatch('postMsgToApp', {\n            //         action: 'presentModal',\n            //         data: {\n            //             url: path,\n            //         }\n            //     })\n            //     return ;\n            // }\n\n            this.$router.push({ path: path });\n        }\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" >\n\n.auth_login {\n    /*padding-top: 40px;*/\n    \n    .title {\n        font-size: 24px;\n        padding: 20px 28px 5px;\n        color: #FFC107;\n    }\n\n\t.el-form {\n        width: 85%;\n        margin: 0 auto;\n    }\n\n    .el-form-item {\n        margin-bottom: 15px;\n    }\n\n    .el-form-item__label {\n        padding-bottom: 0;\n    }\n\n    .submit_item {\n        margin-top: 35px;\n\n        .el-button {\n            width: 100%;\n        }\n    }\n\n    .tips {\n        position: relative;\n    }\n}\n\n    \n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=1f8523d2&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}