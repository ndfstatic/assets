{"version":3,"sources":["webpack:///./src/views/home/Nav.vue?cc3c","webpack:///src/views/home/Nav.vue","webpack:///./src/views/home/Nav.vue?3d2e","webpack:///./src/views/home/Nav.vue?6f37","webpack:///./src/views/home/Nav.vue?7ff8"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","item","key","id","class","fixed","is_fix","hightOdds","app","hightOddsId","attrs","on","$event","productClick","_f","icon","_v","_s","name","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-7bca02ce.de635cce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home_nav\"},_vm._l((_vm.productList),function(item){return _c('el-card',{key:item.id,class:{fixed: item.is_fix == 'Y', hightOdds: _vm.app.hightOddsId == item.id },attrs:{\"shadow\":\"never\"}},[_c('div',{on:{\"click\":function($event){return _vm.productClick(item)}}},[_c('el-row',[_c('el-col',{attrs:{\"span\":18}},[_c('div',{staticClass:\"grid-content bg-purple p_info\"},[_c('img',{attrs:{\"src\":_vm._f(\"imgFormatter\")(item.icon)}}),_c('span',[_vm._v(_vm._s(item.name))])])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"grid-content bg-purple\"},[_c('div',[(item.is_fix == 'N')?_c('i',{staticClass:\"fas fa-chevron-right ic_right\"}):_c('span',{staticClass:\"ic_right\"},[_vm._v(\"维护中\")])])])])],1)],1)])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"home_nav\">\n       <el-card shadow=\"never\" :key=\"item.id\" v-for=\"item in productList\" :class=\"{fixed: item.is_fix == 'Y', hightOdds: app.hightOddsId == item.id }\">\n           <div @click=\"productClick(item)\">\n                <el-row>\n                    <el-col :span=\"18\">\n                        <div class=\"grid-content bg-purple p_info\">\n                            <img :src=\"item.icon | imgFormatter\" />\n                            <span>{{ item.name }}</span>\n                        </div>\n                    </el-col>\n                    <el-col :span=\"6\">\n                        <div class=\"grid-content bg-purple\">\n                            <div>\n                                <i class=\"fas fa-chevron-right ic_right\" v-if=\"item.is_fix == 'N'\"></i>\n                                <span v-else class=\"ic_right\">维护中</span>\n                            </div>\n                        </div>\n                    </el-col>\n                </el-row>\n           </div>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { getUrl, transferallout } from '@/api/product'\nimport { transfer  } from '@/api/user'\n\nlet winOpen = null;\n\nexport default {\n    name: 'Home-Nav',\n\n    data() {\n        return {\n\n        }\n    },\n\n    computed: {\n\t\tuser() { return this.$store.getters.user },\n\t\tapp() { return this.$store.getters.app },\n        product() { return this.$store.getters.product },\n        id() { return this.$route.params.id },\n        productList() {\n            const list = this.product.list.filter(p => {\n                return p.nav_id == this.id && p.is_show == 'Y';\n            });\n\n            if(process.env.NODE_ENV != 'development') {\n\n                // if(this.app.isApp && this.app.isIOS) {\n                //     list.forEach(p => {\n                //         if(p.id == 6) {\n                //             p.is_fix = 'Y';\n                //         }\n                //     })\n                // }\n            }\n\n            return list;\n        },\n\n        filterProduct() {\n            const checkNavIsShow = (id) => {\n                let res = false;\n                this.product.navList.forEach(nav => {\n                    nav.list && nav.list.forEach(p => {\n                        if(p.id == id) {\n                            if(nav.is_show == 'Y') {\n                                res = true;\n                            } \n                        }\n                    })\n                })\n\n                return res;\n            }\n\n            const list = this.product.list.filter(item => {\n                return item.is_show == 'Y' && checkNavIsShow(item.id);\n            });\n\n            return list;\n        },\n    },\n\n    mounted() {\n        this.init();\n    },\n\n    methods: {\n       init() {\n        //    console.log(this.productList);\n       },\n\n       productClick(product) {\n            if(this.user.roles.indexOf('user') == -1) {\n                this.$message.error('请先登录账号');\n                return ;\n            }\n\n           if(this.app.hightOddsId == product.id) {\n               this.$router.push('/activity/hightodds');\n               return ;\n           }\n\n           if(product.is_fix == 'Y') {\n               return ;\n           }\n\n           if(this.app.isApp) {\n               this.appItemClick(product);\n           }else {\n                const id = product.id;\n\n                if(id == 10 || id == 18) {\n                    this.$router.push('/product/' + id);\n                }else {\n                    if(winOpen) {\n                        winOpen.close();\n                    }\n\n                    winOpen = window.open(\"\", \"product\");\n\n                    setTimeout(() => {\n                        const link = this.$router.resolve('/redirect?pid=' + id);\n                        winOpen.location = link.href;\n                    }, 100);\n                }\n           }\n       },\n       \n       appItemClick(product) {\n            if(product.id == 10 || product.id == 18) {\n                const url = '/product/' + product.id;\n                this.$store.dispatch('postMsgToApp', {\n                    action: 'presentModal',\n                    data: {\n                        url,\n                        title: product.name\n                    }\n                })\n            }else if(product.id == 6) {\n                const url = '/redirect?pid=' + product.id;\n                this.$store.dispatch('postMsgToApp', {\n                    action: 'presentModal',\n                    data: {\n                        url,\n                        title: product.name\n                    }\n                })\n            }else {\n                // if(this.loading) return ;\n                // this.loading = true;\n                this.loading = this.$loading({\n                    lock: true,\n                    text: this.app.autoExchange ? '余额自动转入游戏中' : '加载中',\n                    spinner: 'el-icon-loading',\n                    background: 'rgba(0, 0, 0, 0.7)'\n                });\n\n                if(this.app.autoExchange) {\n                    this.reloadBalance(product, (hadExchange) => {\n                        if(hadExchange) {\n                            const product_ids = this.filterProduct.map(item => { return item.id }).join(',');\n                            this.$store.dispatch('productBalanceByAjax', { product_ids }).then(() => {\n                                this.getProductUrlInApp(product);\n                            });\n                        }else {\n                            this.getProductUrlInApp(product);\n                        }\n                    });\n                }else {\n                    this.getProductUrlInApp(product);\n                }\n            }\n        },\n\n        reloadBalance(product, callback) {\n            const product_ids = this.filterProduct.map(item => { return item.id }).join(',');\n            // this.loading = true;\n            this.$store.dispatch('productBalanceByAjax', { product_ids }).then((json) => {\n                if(json.code == 200) {\n                    let idArr = [], total_money = 0;\n                    for(let id in json.list) {\n                        const money = Number(json.list[id].money);\n                        \n                        if(id != 0 && id != product.id) {\n                            // 大于 0 则 回收\n                            if(money > 0) {\n                                idArr.push(id);\n                            }\n                        }\n\n                        if(id == 0) {\n                            total_money = money\n                        }\n                    }\n\n                    if(idArr.length) {\n                        const data = {\n                            type: 3,\n                            product_id: idArr.join(','),\n                        }\n\n                        transfer(data).then(json => {\n                            if (json.code == 200) {\n                                transferallout(product.id).then(() => {\n                                    setTimeout(() => {\n                                        this.loading.close();\n                                        callback && callback(1);\n                                    }, 3000);     \n                                });\n                            } else {\n                                this.$message.error(json.info);\n                                this.loading.close();\n                                callback && callback();\n                            }\n                        });\n                    }else {\n                        if(total_money > 0) {\n                            transferallout(product.id).then(() => {\n                                this.loading.close();\n                                callback && callback();\n                            })\n                        }else {\n                            this.loading.close();\n                            callback && callback();\n                        }\n                    }\n\n                }else {\n                    this.$message.error(json.info);\n                    this.loading.close();\n                    callback && callback();\n                }\n            });\n        },\n\n        getProductUrlInApp(product) {\n            const data = {\n                product_id: product.id,\n                gameversion: 2,\n                orientation: 2,\n            }\n\n            this.loading = true;\n            getUrl(data).then(json => {\n\t\t\t\tif (json.code == 200) {\n                    const url = json.list.login_url;\n\n                    if(product.id == 17) {\n                        this.$store.dispatch('postMsgToApp', {\n                            action: 'openURL',\n                            data: {\n                                url: url,\n                            }\n                        })\n                    }else {\n\n                        this.$store.dispatch('postMsgToApp', {\n                            action: 'presentModal',\n                            data: {\n                                url,\n                                title: product.name\n                            }\n                        })\n\n                    }\n\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error(json.info);\n                }\n                \n                setTimeout(() => {\n                    this.loading = false;\n                }, 500);\n\t\t\t});\n        },\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\">\n\n.home_nav {\n    padding: 10px 15px;\n\n    .el-card {\n        margin-bottom: 10px;\n        background: transparent;\n        border: none;\n        border-bottom: 1px solid #8a8a8a;\n        border-radius: 0;\n        position: relative;\n\n        .el-card__body {\n            padding: 0px 15px;\n            color: #fff;\n            font-size: 16px;\n\n            a {\n                display: block;\n            }\n\n            .grid-content {\n                height: 80px;\n                line-height: 80px;\n\n                .ic_right {\n                    float: right;\n                    height: 100%;\n                    line-height: 80px;\n                }\n            }\n\n            .p_info {\n\n                img {\n                    height: 100%;\n                }\n\n                span {\n                    display: inline-block;\n                    position: relative;\n                    top: -34px;\n                }\n\n            }\n        }\n\n\n        &.fixed {\n            // background: #ccc; \n            filter: grayscale(100%);\n\n            .el-card__body {\n                color: #ccc;\n            }\n        }\n\n        &.hightOdds {\n            &::before {\n                display: block;\n                content: '';\n                background-image: url(~@/assets/hight.png);\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 60px;\n                height: 60px;\n                background-size: 100% auto;\n            }\n        }\n    }\n}\n\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Nav.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Nav.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Nav.vue?vue&type=template&id=0dad633c&\"\nimport script from \"./Nav.vue?vue&type=script&lang=js&\"\nexport * from \"./Nav.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Nav.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Nav.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Nav.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}